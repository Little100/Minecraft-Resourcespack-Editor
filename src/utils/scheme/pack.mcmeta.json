{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Minecraft 资源包元数据",
  "description": "pack.mcmeta 文件的 JSON Schema",
  "type": "object",
  "properties": {
    "pack": {
      "type": "object",
      "description": "资源包元数据信息",
      "properties": {
        "pack_format": {
          "type": "integer",
          "description": "资源包格式版本号(传统模式, ≤1.21.5)",
          "minimum": 1,
          "examples": [15, 18, 22, 34]
        },
        "description": {
          "description": "资源包的描述信息,显示在游戏的资源包选择界面",
          "oneOf": [
            {
              "type": "string",
              "description": "简单文本描述(支持 § 颜色代码)",
              "examples": ["我的材质包", "§a自定义材质包 §ev1.0"]
            },
            {
              "type": "object",
              "description": "带格式的文本描述,支持颜色和样式",
              "properties": {
                "text": {
                  "type": "string",
                  "description": "文本内容",
                  "examples": ["我的材质包"]
                },
                "color": {
                  "type": "string",
                  "description": "文本颜色",
                  "enum": [
                    "black",
                    "dark_blue",
                    "dark_green",
                    "dark_aqua",
                    "dark_red",
                    "dark_purple",
                    "gold",
                    "gray",
                    "dark_gray",
                    "blue",
                    "green",
                    "aqua",
                    "red",
                    "light_purple",
                    "yellow",
                    "white"
                  ]
                },
                "bold": {
                  "type": "boolean",
                  "description": "是否粗体",
                  "default": false
                },
                "italic": {
                  "type": "boolean",
                  "description": "是否斜体",
                  "default": false
                },
                "underlined": {
                  "type": "boolean",
                  "description": "是否下划线",
                  "default": false
                },
                "strikethrough": {
                  "type": "boolean",
                  "description": "是否删除线",
                  "default": false
                },
                "obfuscated": {
                  "type": "boolean",
                  "description": "是否乱码效果",
                  "default": false
                }
              },
              "required": ["text"]
            },
            {
              "type": "array",
              "description": "多段格式化文本组成的描述",
              "items": {
                "oneOf": [
                  {
                    "type": "string"
                  },
                  {
                    "type": "object",
                    "properties": {
                      "text": {
                        "type": "string",
                        "description": "文本内容"
                      },
                      "color": {
                        "type": "string",
                        "description": "文本颜色"
                      },
                      "bold": {
                        "type": "boolean",
                        "description": "是否粗体"
                      },
                      "italic": {
                        "type": "boolean",
                        "description": "是否斜体"
                      }
                    }
                  }
                ]
              }
            }
          ]
        },
        "supported_formats": {
          "description": "支持的格式版本(1.20-1.21.5,与 min/max_format 互斥)",
          "oneOf": [
            {
              "type": "object",
              "description": "格式版本范围",
              "properties": {
                "min_inclusive": {
                  "type": "integer",
                  "description": "最小支持的格式版本(包含)",
                  "minimum": 1
                },
                "max_inclusive": {
                  "type": "integer",
                  "description": "最大支持的格式版本(包含)",
                  "minimum": 1
                }
              },
              "required": ["min_inclusive", "max_inclusive"]
            },
            {
              "type": "array",
              "description": "支持的格式版本列表",
              "items": {
                "type": "integer",
                "minimum": 1
              },
              "minItems": 1
            }
          ]
        },
        "min_format": {
          "description": "最小支持的格式版本(1.21.9+,新版模式)",
          "oneOf": [
            {
              "type": "array",
              "description": "[主版本, 次版本]",
              "items": {
                "type": "integer",
                "minimum": 0
              },
              "minItems": 2,
              "maxItems": 2,
              "examples": [[69, 0], [70, 5]]
            },
            {
              "type": "array",
              "description": "[主版本](次版本默认为0)",
              "items": {
                "type": "integer",
                "minimum": 1
              },
              "minItems": 1,
              "maxItems": 1,
              "examples": [[69]]
            }
          ]
        },
        "max_format": {
          "description": "最大支持的格式版本(1.21.9+,新版模式)",
          "oneOf": [
            {
              "type": "array",
              "description": "[主版本, 次版本]",
              "items": {
                "type": "integer",
                "minimum": 0
              },
              "minItems": 2,
              "maxItems": 2,
              "examples": [[69, 10], [70, 0]]
            },
            {
              "type": "array",
              "description": "[主版本](次版本默认为0)",
              "items": {
                "type": "integer",
                "minimum": 1
              },
              "minItems": 1,
              "maxItems": 1,
              "examples": [[70]]
            }
          ]
        }
      },
      "anyOf": [
        {
          "required": ["pack_format", "description"]
        },
        {
          "required": ["min_format", "description"]
        }
      ]
    },
    "language": {
      "type": "object",
      "description": "自定义语言配置(动态注册新语言选项)",
      "patternProperties": {
        "^[a-z_]+$": {
          "type": "object",
          "description": "语言代码(建议格式：xx_xx 或 x_xxx)",
          "properties": {
            "name": {
              "type": "string",
              "description": "语言显示名称",
              "examples": ["简体中文", "梗体中文", "English (US)"]
            },
            "region": {
              "type": "string",
              "description": "地区名称",
              "examples": ["中国", "天朝", "United States"]
            },
            "bidirectional": {
              "type": "boolean",
              "description": "是否为双向文本(如阿拉伯语、希伯来语)",
              "default": false
            }
          },
          "required": ["name", "region", "bidirectional"],
          "additionalProperties": false
        }
      },
      "additionalProperties": false
    },
    "filter": {
      "type": "object",
      "description": "资源过滤器(1.19+,选择性隐藏下层包的文件)",
      "properties": {
        "block": {
          "type": "array",
          "description": "要屏蔽的资源路径列表(支持正则表达式)",
          "items": {
            "type": "object",
            "properties": {
              "namespace": {
                "type": "string",
                "description": "命名空间(如 minecraft、mymod)",
                "pattern": "^[a-z0-9_.-]+$",
                "examples": ["minecraft", "mymod"]
              },
              "path": {
                "type": "string",
                "description": "资源路径(支持正则表达式,如 recipes/.* 匹配所有配方)",
                "examples": ["recipes/.*", "advancements/.*", "textures/block/.*"]
              }
            },
            "required": ["namespace", "path"],
            "additionalProperties": false
          }
        }
      },
      "additionalProperties": false
    },
    "overlays": {
      "type": "object",
      "description": "覆盖层配置(为特定版本提供增量资源)",
      "properties": {
        "entries": {
          "type": "array",
          "description": "覆盖层条目列表",
          "items": {
            "type": "object",
            "properties": {
              "formats": {
                "description": "旧版格式版本范围(≤1.21.5,与 min/max_format 互斥)",
                "oneOf": [
                  {
                    "type": "integer",
                    "description": "单个格式版本",
                    "minimum": 1,
                    "examples": [15, 18]
                  },
                  {
                    "type": "object",
                    "description": "格式版本范围",
                    "properties": {
                      "min_inclusive": {
                        "type": "integer",
                        "description": "最小版本(包含)",
                        "minimum": 1
                      },
                      "max_inclusive": {
                        "type": "integer",
                        "description": "最大版本(包含)",
                        "minimum": 1
                      }
                    },
                    "required": ["min_inclusive", "max_inclusive"],
                    "additionalProperties": false
                  },
                  {
                    "type": "array",
                    "description": "格式版本列表",
                    "items": {
                      "type": "integer",
                      "minimum": 1
                    },
                    "minItems": 1
                  }
                ]
              },
              "min_format": {
                "description": "新版最小格式版本(≥1.21.9)",
                "oneOf": [
                  {
                    "type": "array",
                    "items": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "minItems": 2,
                    "maxItems": 2
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "integer",
                      "minimum": 1
                    },
                    "minItems": 1,
                    "maxItems": 1
                  }
                ]
              },
              "max_format": {
                "description": "新版最大格式版本(≥1.21.9)",
                "oneOf": [
                  {
                    "type": "array",
                    "items": {
                      "type": "integer",
                      "minimum": 0
                    },
                    "minItems": 2,
                    "maxItems": 2
                  },
                  {
                    "type": "array",
                    "items": {
                      "type": "integer",
                      "minimum": 1
                    },
                    "minItems": 1,
                    "maxItems": 1
                  }
                ]
              },
              "directory": {
                "type": "string",
                "description": "覆盖层目录名(相对于资源包根目录)",
                "pattern": "^[a-zA-Z0-9_.-]+$",
                "examples": ["overlay_1_21_10", "hd_textures", "v1_20_features"]
              }
            },
            "anyOf": [
              {
                "required": ["formats", "directory"]
              },
              {
                "required": ["min_format", "directory"]
              }
            ],
            "additionalProperties": false
          }
        }
      },
      "required": ["entries"],
      "additionalProperties": false
    }
  },
  "required": ["pack"],
  "additionalProperties": false
}